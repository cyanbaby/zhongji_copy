<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <!-- Step 1 创建容器 -->
  <div id="graph"></div>

  <script src="g6.min.js"></script>
  
  <script>
    const graph = new G6.Graph({
      container: document.getElementById('graph'),
      width: window.innerWidth,
      height: window.innerHeight,
      layout: {  // 布局设置
        type: 'dagre'
      },
      defaultNode: {  // 默认节点配置，也是全局配置
        type: 'rect',
        style: {
          radius: 4,
          lineWidth: 2,
          fill: '#EDF5FF',
          stroke: '#1890ff',
          shadowColor: '#1890ff',
          shadowBlur: 20,
          shadowOffsetX: 0,
          shadowOffsetY: 0,
          cursor: 'move'
        },
        labelCfg: {
          style: {
            fontSize: 14,
            fill: '#1890ff',
            cursor: 'move'
          }
        }
      },
      defaultEdge: { // 默认边的配置，也是全局配置
        type: 'polyline'
      },
      fitView: true,  // 适应视图大小
      fitViewPadding: 100,  // 添加渲染视图 padding
    });

    const data = {
      nodes: [
        {
          id: '1',
          label: 'alps_file1',
          type: 'circle',
          style: {
            r: 40,
            stroke: '#1890ff',
            lineWidth: 5
          }
        },
        {
          id: '2',
          label: 'alps_file2',
          type: 'rect',
          style: {
            width: 100,
            height: 40,
            radius: 6,
            lineWidth: 2
          }
        },
        {
          id: '3',
          label: 'alps_file3',
          type: 'ellipse',
          style: {
            rx: 50,
            ry: 20
          }
        },
        {
          id: '4',
          label: 'sql_file1',
          type: 'diamond',
          style: {
            lineWidth: 2
          },
          size: [100, 50]
        },
        { id: '5', label: 'sql_file2' },
        { id: '6', label: 'feature_etl_1' },
        { id: '7', label: 'feature_etl_1' },
        { id: '8', label: 'feature_extractor' },
      ],
      edges: [
        {
          source: '1',
          target: '2',
          type: 'line',
          label: 'line'
        },
        {
          source: '1',
          target: '3',
          type: 'polyline',
          label: 'polyline'
        },
        {
          source: '2',
          target: '4',
          type: 'arc',
          label: 'arc'
        },
        { source: '3', target: '4', type: 'cubic', label: 'cubic' },
        { source: '4', target: '5' },
        { source: '5', target: '6' },
        { source: '6', target: '7' },
        { source: '6', target: '8' },
      ]
    }

    // graph.data(data); // 读取 Step 2 中的数据源到图上
    // graph.render(); // 渲染图

    graph.read(data)
  </script>
</body>

</html>