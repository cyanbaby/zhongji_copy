# [熬夜整理了一万多字的line-height总结,你还看不懂那我真的要跪了!](https://www.qiyuandi.com/zhanzhang/zonghe/13218.html)
```js
// 消除click特效
window.getEventListeners(window)
window.removeEventListener('mousedown', window.getEventListeners(window).mousedown[0].listener)
window.removeEventListener('mouseup', window.getEventListeners(window).mouseup[0].listener)
window.getEventListeners(window)
```

# line-height 详解
todo 上半行距和下半行距是否相等？

## 什么是基线?
所以一定要注意: 基线（baseline）不是汉字文字的下底部，而是英文小写字母“x”的下底部!  
如果把line-height设置为0px 那么这个基线就会重叠! 文字也重叠了!
* todo demo01 为什么还能看见x？

## 什么是顶线
顶线就是在中文汉字的顶部位置就是顶线的位置!

## 什么是底线
底线就是在中文汉字的底部位置 就是底线的位置!

## 什么是中线？x-height又是什么?
x-height,意思也就是小写字母x的高度!
todo 此文的中线(等分线)(middle)的作用，的描述还需参考其他文献验证
todo middle也只是一种近似接近于居中的效果! 因为不同的字体在行元素中的中线的位置是不一样的 !
todo 所以 在CSS中, 内联元素(行元素) 垂直居中(也就是给内联元素设置vertical-align:middle)是对文字垂直居中, 而与外部容器无关!
todo 从此处开始犯迷糊，vertical-align:middle应设置谁，参考谁

## 字母x与css中ex单位之间的概念
不管如何修改字体大小和字号 小图标都会更好的去垂直居中, vertical-align: middle;也没必要使用了! 借助ex这个相对单位我们直接利用默认的baseline基线对齐就可以实现小图标内联元素和文字进行居中的效果了!   

小结: ex相对单位不会受字体和字号的影响! 虽然ex单位跟line-height没有直接关系，但也有间接关系!

## 回顾什么是内联元素!
该元素默认的display属性值为inline、inline-block、inline-table的元素就是内联元素  
文字本身也是一个内联元素(是匿名内联元素  
元素从表面上看有文字、 图片、按钮、输入框、下拉框、等原生表单控件都是内联元素!

## 内联盒模型 (重点核心)
通俗的说这一段代码中包含很多种类的盒子!
```html
<p>
    这是一行普通的文字, 这里有一个 <em>我是斜体</em> 标签
</p >
```
### (1) 内容区域 content area
内容区域是一种我们肉眼看不见的盒子，它围绕着文字 我们平常是看不见这个盒子的!  
通俗理解: 其实可以通过选中文本然后查看背景颜色区域作为内容区域来理解!

**小提示:** 
* 要注意的是 如果是图片,其内容不是文字,不存在内容区域之说
* 因此对于图片这类元素可以把内容区域看作是元素自身!

内容区域 (content area) 的高度会受到font-family(字体)和font-size(字号)的影响!
* 并且有时候哪怕是当前元素的font-size(字号大小)在不变的情况下, 但也有可能因为 font-family(字体)设置的不同最后导致内容区域 (content area)不一样!

内容区域顶线和底线包裹的区域就是内容区域，如果font-size 或 font-family有变化 那么顶线和底线位置也会变化。
内容区域 是不能使用width和height进行设置宽高的!

todo demo02.html 高度为什么是21px

### (2) 内联盒子(行内框) inline box
说到内联盒子 那么大家一定就不会陌生了 就是我们平常使用的内联元素(行内元素)! 

内联盒子也称之为: 行内框 这要特别注意 **这是针对行元素而言的**, 每个行内元素会生成一个行内框，行内框是一个浏览器渲染模型中的一个概念 无法肉眼观测!

todo 这一块还要结合其他文献理解包含盒子
todo 行内框 = 内容区域

**内联盒子的分类:**
* 内联盒子  
  * 常见的内联盒子 如文字外部包含的是 span、a、em、strong、等这些标签 那么则属于 内联盒子
* 匿名内联盒子
  * 如果 是光秃秃的文字 则属于 匿名内联盒子 所以要注意 光秃秃的文字其实也是一种内联盒子!只是没有标签名字而已!

特别案例: 我给strong设定了line-height为30px 但strong的高度依旧是19.8 其他两个内联盒子也是一样的高度 并没有影响，
* 影响的是strong上下周围的区域 也就是分别增加/减少到内容区域的上下两边灰色的部分! 并且上下的灰色部分的高度是一致的!
* 也就是我们待会要讲解到的行框与行间距(行距)、(半行距)的概念
```html
<div>
    <span style="">重庆市</span>
    <em>北京市</em>
    <strong style="line-height: 30px;">深圳市</strong>
</div>
```

### (3) 行框盒子 line box
每一行就是一个行框盒子，那什么又叫做每一行呢 ？由多个内联盒子组合而成的一行 就会形成一个行框盒子  
所以反推每一个行框盒子又是由一个个内联盒子组成而来的!
* 注意: 是每一行都会形成，如果文字有五行，就会形成5个行框。
* 如果有换行符 把字符和元素换到下一行那么 下一行就是一个新的行框! 就相当于有多行内容时，每行都会有自己的行框

todo 重点校验
行框高度等于本行框内部,所有行内框(内联盒子)中,最大的那个行内框(内联盒子)的值! 
重点: 是以带有行高值最大的行内框(内联元素)为基准来最终计算行框的高度，其他行内框(内联元素)采用自己的对齐方式向基准对齐!

todo 行框最后一个元素什么的 - 其他文献

todo 行间距 + 字体大小 = Line-height的高度 就是这个高度撑开了行框! (行间距包含在行框内部的!) 
todo 从上图可以看出来 所有的内联元素都是以基线对齐的上面已经说过了

设置line-height属性会影响行框的布局?
*  line-height 与 font-size 的计算值之差(行距)分为两半，分别加到一个内联元素的顶部和底部 而且计算出来的差值分别加到内容区域的顶部和底部的就是行距 所以实质上撑开 行框 的是line-height行高其中的行距!

### (4) 包含盒子 containing box
todo 图
todo 一个行框盒子 说明只有一行, 多个行框盒子说明是多行! 当然也有人称呼它为 包含块(containing block)

### (5) 幽灵空白节点
在浏览器对**内联元素的解析和渲染中 每一个行框 前面都有一个** ==空白节点==   
但很奇特的是这个空白节点永远是看不见透明的 并且也不占据任何宽度 也就是说 宽度为0,   
是的 肉眼看不见 也无法通过脚本去获取到 就好比幽灵一般!   
但又的的确确是存在的! 就跟文本节点一样 所以 大家都称为它是 幽灵空白节点

并且其实它也是一个盒子 不过是一个抽象的盒子   
官方定义名称为: strut (支柱) 重点来了,   
并且这个空白字符strut(支柱) 是一个存在于每个行框盒子 内部的最前面   
它的宽度只有0px,看不到的, **同时这个 strut (支柱)的行高和字体大小都与该元素相同**!   
简单的先知道这个概念就可以了 至于高度从何而来我们后面再细说!

todo div里能不能有行框盒子？
todo 能借鉴demo 解释line-height基本使用，在哪儿设置
todo 行框盒子 在HTML5文档模式下, 每一个行框盒子前面都有一个宽度为0的 幽灵空白节点,
* 幽灵空白节点到底是在行框盒子里面最前，还是行框盒子之前

todo demo里面的122px可以理解小箭头的高度为12px吗？

## line-height与内联元素高度之间的关系
不管是内联元素 还是 块元素 在他们没有设置高度并且里面也有文字内容的情况下 元素的高度从何而来?
* 很多人认为是由文字撑开! 实际上却不是， 而是line-height的高度决定的!
todo 写一下demo幽灵空白节点
todo 写下案例2demo

## 什么是行距?
行距 又称为 行间距

todo 其他文献两个地方表示line-height的图  

行距小结: 指相邻文本行间上一个文本行底线和下一文本行顶线之间的距离



## 行距的计算公式
行间距 = 行高 - 字体大小
todo 看一下图片，两行中间的位置。 行间距/2 所得到的值分别给粉红色的两部


## 真正理解什么是行高?
我们知道了内容区域与字体字号大小的关系、也知道了什么是行间距以后, 其实我们就可以反推出 行高是什么了!  
公式: 内容区域content area(或字体大小) + 行间距 = 行高  

注意 :
* 以上我们说的内容区域大小 其实相对而言就可以理解为 font-size字体大小!
* 行高跟字体样式也有一定关系! 不同的字体默认的行高是不一样的! 因为字体的不同影响了内容区域!


## line-height的各种取值类型
todo 行高的继承规则，单位不同机制不同

### line-height的取值可以是一个像素值!
特别注意:
* line-height的大小与font-size大小 相等时, 那么行间距为0! 也就是说相当于没得行间距!
* line-height的大小 不能小于 当前元素的font-size大小! 否则算出来的行间距会负数 导致 每一行之间的文本重叠! 如下图

### line-height的取值可以是一个百分比%
指定一个百分数, 意思就是会相对于font-size字体大小去计算行高! 没有明白吗？那我们看下面的案例吧!  
但是如果使用百分比,那么这个百分比通常不会小于100%,因为小于100%所计算出来的行距值是一个负数!   
小提示: line-height的百分比取值并不是很常用! 通常都是像素值!

### line-height的取值可以是一个整数数字!
如果设置line-height的值为一个整数数值，那么则行高的值其实就是font-size字体大小相应的倍数!


## line-height属性与内联元素 垂直居中的关系
todo flex布局啊flex布局，其他非flex布局技巧和面试

### 1、line-height让单行文本垂直居中详解
要让单行文本垂直居中。其实只需要设置line-height这一个属性就可以了，根本不需要再设置一个height属性, 所以有很多教程也误导了大多数人一定要去设置一个height属性才可以垂直居中，其实不然! 

### 2、line-height只能让文本近似于垂直居中  todo why?
这里的垂直居中只仅仅是无限接近于垂直居中! 为什么要说成是接近于垂直居中呢?  
* 原因1: 行高的实现在于CSS中的行间距是 一行文字的上下等分机制! 
  * 也就是说一行文本的上面和下面所存在的行间距是相等的! 
  * 所以如果行间距只存在于一边的话 那么文字是无法垂直居中的, 其实这也证明了文字垂直居中靠的重要因素就是上下行间距!
* 原因2: 刚刚说了 接近于垂直居中，因为文字的中线位置普遍要比 行框盒子的中间线位置要低一些! 
  * 如果你不理解 请看下图: 黄颜色的线 为行框盒子的中间线表示位置, 
  * 蓝色的线为文字的中线位置! 是不是文字中线比行框盒子低呢! 
  * 对吧! 但有些字体因为看起来可能比较有下沉的感觉，所以可能在行间距垂直居中的作用下会有1px像素的小差异 
  * 所以我们称之为：接近于垂直居中!

### 3、line-height让多行文本垂直居中
需要使用到vertical-align属性!

原理实现如下
* 多行文本使用一个元素来包裹, 不管你用div、p、还是span、内联元素 还是 块元素来包裹都是可以的! 
* 但是必须设置一个display: inline-block; 好处就是让这个元素保持内联元素的特性
* 给多行文本的包裹元素 设置 line-height: normal; 是为了清除继承下来的行高!
* 在给包含多行文本的元素设置了 display: inline-block; 属性后 会产生关键的 行框盒子
* 而且前面我们已经知道了 只要有一个行框盒子那么都会附带一个 幽灵空白节点! 还不明白的会上面看看! 
* 我们设置 line-height: 200px;就作用到了这个幽灵空白节点上! 从而在行框前面 撑开了 200px的高度

## line-height 与 font 的使用顺序问题
todo 很重要

使用font属性也可以设置行高，可以在字体大小后添加 /行高大小 来表示行高，这个值是可选的，不指定的时候会采用默认值也就是没得。

但是当line-height属性设置在 font 属性之前，  
并且 font 属性中没有设置行高的时候，  
**line-height属性会被font 属性中的行高默认值覆盖**，  
也就是说在这个时候line-height属性是无效的。

**所以如果想要设置行高，可以把line-height属性设置在 font 属性之后，也可以直接在 font 属性里面设置行高。**

## line-height 与 图片之间的细微关系
从上图中可以看出，图片在div元素中的下部会有一点点间隙! 这正因为前面提到的 匿名空白文本节点的存在，才会造成图中的情形!
todo 空白可不可以消除？

为什么给父元素设置text-align: center; 会让内部的img元素居中?
原因: 
* 这其实是居中的 幽灵空白节点, 而不是图片! 因为幽灵空白节点也是一个文本节点,设置text-align: center; 
* 理所当然会居中，而且后面的图片和前面的幽灵空白节点同样都是 内联元素，幽灵空白节点居中的时候就把图片顶过来了! 
* 而且幽灵空白节点是0宽度看不出来的，所以我们看到的就仅仅是图片居中了! (个人理解仅供参考)
* todo 有待考证，这关乎幽灵空白节点所在位置

解决图片因幽灵空白节点而产生的底部空隙  
todo 当前demo结合其他文献，单独梳理

## line-height行高总结

# 自己的问题
* todo 行内替换元素
* 拿文字的中线和容器中分线对齐，视觉效果？
  * 比方说’微软雅黑’就是一个字符下沉比较明显的字体 [张鑫旭列表](https://www.zhangxinxu.com/wordpress/category/js/page/24/)
呵呵，你会发现图标和文字不在一条线上，而相对于字符x的中心位置对齐，我们肉眼看上去就好像和文字居中对齐了。  [张鑫旭列表](https://www.zhangxinxu.com/wordpress/category/js/page/24/)
* todo 浏览器给的normal， 一般通常默认为1.2左右

